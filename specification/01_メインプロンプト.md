# でんしゃかん字クイズ - Android アプリ開発プロンプト

## プロジェクト概要

小学1年生向けの漢字学習アプリを Android (Kotlin) で開発してください。
電車好きの子ども向けに、電車に関連した例文で80字の漢字の読み方を学習できるクイズアプリです。

## 技術スタック

- **言語**: Kotlin
- **IDE**: Android Studio
- **最小SDK**: API 24 (Android 7.0)
- **ターゲットSDK**: API 34 (Android 14)
- **アーキテクチャ**: MVVM
- **UI**: Jetpack Compose
- **データ保存**: DataStore (Preferences)
- **DI**: Hilt (任意)

## 主要機能

### 1. スタート画面
- アプリタイトル「でんしゃかん字クイズ」と電車アイコン表示
- 2つのモード選択ボタン
  - **通常モード**: 80字すべてからランダム出題
  - **苦手かん字モード**: 間違いが多い漢字のみ出題（苦手がない場合は無効化）
- これまでの正解率を表示（学習履歴がある場合）
- 右上に設定ボタン（⚙️アイコン）

### 2. 設定画面
- 問題数設定: 10問 / 20問 / 全問（80問）の3択
- 学習レポートへの遷移ボタン
- 学習記録リセットボタン（確認ダイアログ付き）
- 戻るボタン

### 3. 学習レポート画面
- 全体の成績表示
  - 解いた問題数
  - 正解数
  - 正解率（%）
- 苦手な漢字一覧
  - 「間違い回数 > 正解回数」の漢字を表示
  - 各漢字の間違い回数と正解回数を表示
  - 間違いが多い順にソート

### 4. クイズ画面
- ヘッダー: アプリ名、進捗（n / 全問数）、終了ボタン（×）
- 進捗バー（緑色で進行状況を表示）
- 現在のスコア表示
- 漢字を大きく中央に表示（黄色い枠で強調）
- 「れいぶんを見る」ヒントボタン（回答前のみ表示）
- 4択の選択肢ボタン（同カテゴリから優先的に選択肢を生成）
- 回答後の結果表示
  - 正解/不正解のフィードバック
  - 不正解時は正しい読みを表示
  - 例文を「つかいかた」として表示
- 「つぎへ」ボタン

### 5. 結果画面
- スコア表示（正解数 / 全問数）
- 成績に応じたメッセージとアイコン
- 今回間違えた漢字の一覧表示
- 「もういっかい」ボタン（同じモードで再挑戦）
- 「スタートにもどる」ボタン

## データ仕様

### 漢字データ
- 80字の漢字データを定数として定義
- 各漢字に以下の情報を持たせる:
  - id: 一意のID (1-80)
  - kanji: 漢字1文字
  - reading: ひらがなの読み
  - sentence: 例文（小1で習う漢字以外はひらがな表記）
  - category: カテゴリ（numbers, days, directions, nature, people, body, colors, things）

詳細は `02_漢字データ定義.md` を参照

### 学習記録データ
DataStoreに以下を保存:
- 各漢字の正解回数・間違い回数
- 累計問題数
- 累計正解数

詳細は `03_機能仕様書.md` を参照

## UI仕様

詳細は `04_UI仕様書.md` を参照

- カラーテーマ: 水色〜青のグラデーション背景
- カードUI: 白い角丸カード
- ボタン: 黄色（選択肢）、青（アクション）、緑（正解）、赤（不正解）
- フォント: 子ども向けに大きめ、読みやすいフォント

## 開発の進め方

1. プロジェクトセットアップ（Jetpack Compose テンプレート）
2. 漢字データクラスとデータ定義
3. DataStoreによるデータ永続化の実装
4. 画面ごとのComposable作成
   - StartScreen
   - SettingsScreen
   - ReportScreen
   - QuizScreen
   - ResultScreen
5. ViewModelの実装
6. ナビゲーション設定
7. テストとデバッグ

## 注意事項

- すべてのUI文言は小学1年生が読めるよう、小1で習う漢字以外はひらがな表記
- 選択肢は同じカテゴリの漢字から優先的に生成（消去法で解けないように）
- 苦手判定は「間違い回数 > 正解回数」で判定
- アニメーションは控えめに（子どもが集中できるように）
